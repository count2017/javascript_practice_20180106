<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<p>
			原因是this指针只在age方法的函数内指向xiaoming，在函数内部定义的函数，
			this又指向undefined了！（在非strict模式下，它重新指向全局对象window！）
			修复的办法也不是没有，我们用一个that变量首先捕获this：
		</p>
		
		<script type="text/javascript">
			'use strict';
			var xiaoming = {
				name:'小明',
				birth:1990,
				age:function(){
					var that = this;
					function getAge(){
						var y = new Date().getFullYear();
						return y - that.birth;
//						return y - this.birth;
						
					}
					return getAge();
				}
			};
			document.write(xiaoming.age());
		</script>
	</body>
</html>
